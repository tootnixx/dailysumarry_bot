name: Run Stock Sentinel WITA

on:
  schedule:
    # 00 = Menit ke-0
    # 08 = Jam 8 pagi UTC (Jam 16:00 WITA)
    # * * = Setiap hari dan setiap bulan
    # 1-5 = Senin sampai Jumat
    - cron: '00 08 * * 1-5'
  workflow_dispatch: # Tombol rahasia untuk menjalankan bot kapan saja secara manual

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: Install Dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: Execute Sentinel Bot
        env:
          TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHAT_ID: ${{ secrets.CHAT_ID }}
        run: python bot.py
